<!DOCTYPE html>
<html lang="en">
<head>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WW7VC75G');</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <meta name="description" content="LoveMeNow - Account Settings">
    <title>Account Settings - LoveMeNow</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- âœ… MAIN SITE STYLES (needed for layout, variables, navbar, etc.) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/styles.css') }}?v=20250116-3">

    <!-- Performance & mobile layers -->
    <link rel="preload" href="{{ url_for('static', filename='CSS/performance.css') }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ url_for('static', filename='CSS/performance.css') }}"></noscript>

    <link rel="preload" href="{{ url_for('static', filename='CSS/mobile-optimizations.css') }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ url_for('static', filename='CSS/mobile-optimizations.css') }}"></noscript>

    <!-- Critical Toast Styling -->
    <style>
        .toast-stack{position:fixed;top:2rem;right:2rem;z-index:99999;display:flex;flex-direction:column;gap:0.5rem}
        .toast{background:#ef4444!important;color:white!important;border:none!important;border-radius:8px;padding:1rem 1.5rem;min-width:300px;position:relative;animation:slideInRight 0.3s ease;font-size:1rem;font-weight:600;z-index:99999;box-shadow:0 4px 12px rgba(239,68,68,0.3)!important}
        .toast-success,.toast-danger,.toast-error,.toast-warning,.toast-info,.toast-message{background:#ef4444!important;color:white!important;border:none!important;box-shadow:0 4px 12px rgba(239,68,68,0.3)!important}
        .flash_message_close{position:absolute;top:0.5rem;right:0.5rem;background:none;border:none;color:rgba(255,255,255,0.8)!important;cursor:pointer;padding:0.25rem;border-radius:4px;transition:color 0.2s ease;font-size:1rem;z-index:100000}
        .flash_message_close:hover{color:rgba(255,255,255,1)!important}
        @keyframes slideInRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}
        @media (max-width:768px){.toast-stack{right:1rem;left:1rem;top:1rem}.toast{min-width:auto}}
    </style>

    <!-- CSRF Protection -->
    {% include 'csrf_meta.html' %}

    <!-- Google AdWords Tracking -->
    {% include 'google_tag.html' %}
</head>
<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WW7VC75G"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <!-- Navigation -->
    {% include "navbar.html" %}

    <!-- Settings Header -->
    <section class="profile-header">
        <div class="container">
            <div class="profile-header-content">
                <div class="profile-avatar">
                    <div class="avatar-circle">
                        <i class="fas fa-cog"></i>
                    </div>
                </div>
                <div class="profile-info">
                    <h1>Account Settings</h1>
                    <p class="profile-email">{{ current_user.email }}</p>
                    <p class="profile-member-since">Manage your security and preferences</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Settings Content -->
    <div class="container profile-container">
        <div class="profile-layout">
            <!-- Navigation Breadcrumb -->
            <div class="settings-breadcrumb"></div>

            <!-- Security Section -->
            <section class="profile-section">
                <div class="section-header">
                    <h2><i class="fas fa-shield-alt"></i> Security</h2>
                    <p class="section-description">Trust & control</p>
                </div>
                <div class="section-content">
                    <div class="security-options">
                        <div class="security-item">
                            <div class="security-info">
                                <h3>Change Password</h3>
                                <p>Update your account password</p>
                            </div>
                            <button class="btn btn-outline" id="changePassword" onclick="openPasswordModal()">Change</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Danger Zone Section -->
            <section class="profile-section danger-zone">
                <div class="section-header">
                    <h2><i class="fas fa-exclamation-triangle"></i> Danger Zone</h2>
                    <p class="section-description">Data-privacy norms</p>
                </div>
                <div class="section-content">
                    <div class="danger-actions">
                        <div class="danger-item">
                            <div class="danger-info">
                                <h3>Delete Account & Data Export</h3>
                                <p>Permanently delete your account and download your data (GDPR-style)</p>
                            </div>
                            <div class="danger-buttons">
                                <a href="{{ url_for('auth.delete_account') }}">
                                    <button class="btn btn-danger">Delete Account</button>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    {% include "change_password_modal.html" %}
    {% include "login_register_modal.html" %}
    {% include "wishlist_modal.html" %}

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="toast-stack" id="flashStack">
          {% for category, msg in messages %}
            <div class="toast toast-{{ category }}">
              <button class="flash_message_close" onclick="closeToast(this.parentElement)">
                <i class="fas fa-times"></i>
              </button>
              {{ msg }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Global JS bundle -->
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>

    <!-- Mobile Menu JavaScript -->
    <script src="{{ url_for('static', filename='js/mobile-menu.js') }}" defer></script>

</body>
</html>
